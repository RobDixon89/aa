---
import type { Props as $, Mark } from "astro-portabletext/types";
import { mapLinkAttributes } from "../../utils/mapping";

type Props = $<Mark>;

const { node } = Astro.props;

const markTypeIs = (markType: string) => markType === node.markType;

const linkAttrs = markTypeIs("contentLink")
  ? mapLinkAttributes(node.markDef)
  : undefined;
---

{
  markTypeIs("em") ? (
    <em>
      <slot />
    </em>
  ) : markTypeIs("strong") ? (
    <strong>
      <slot />
    </strong>
  ) : markTypeIs("contentLink") ? (
    <a href={linkAttrs?.url} target={linkAttrs?.target}>
      <slot />
    </a>
  ) : null
}
